<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux系统管理--文件系统管理 | Secular</title><meta name="keywords" content="linux"><meta name="author" content="The Kun"><meta name="copyright" content="The Kun"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="硬盘结构  硬盘的逻辑结构  每个扇区的大小都是固定的，位512Byte。扇区也是磁盘的最小存储单位。  磁盘的大小是使用**“磁头数X柱面数X扇区数X每个扇区大小”** 这样的公式来计算的。其中磁头数(Heads) 表示硬盘总共有几个磁头，也可以理解为硬盘有几个盘面，然后乘以二；柱面数(Cylinders) 表示硬盘每一面盘片有几条磁条；扇区数(Sectors)表示每条磁道上有几个扇区；每个扇">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux系统管理--文件系统管理">
<meta property="og:url" content="http://www.wanchelai.com/2020/11/01/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="Secular">
<meta property="og:description" content="硬盘结构  硬盘的逻辑结构  每个扇区的大小都是固定的，位512Byte。扇区也是磁盘的最小存储单位。  磁盘的大小是使用**“磁头数X柱面数X扇区数X每个扇区大小”** 这样的公式来计算的。其中磁头数(Heads) 表示硬盘总共有几个磁头，也可以理解为硬盘有几个盘面，然后乘以二；柱面数(Cylinders) 表示硬盘每一面盘片有几条磁条；扇区数(Sectors)表示每条磁道上有几个扇区；每个扇">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux14.png">
<meta property="article:published_time" content="2020-10-31T16:00:00.000Z">
<meta property="article:modified_time" content="2020-11-13T14:12:00.268Z">
<meta property="article:author" content="The Kun">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux14.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.wanchelai.com/2020/11/01/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/image/pwa/manifest.json"/><link rel="apple-touch-icon" sizes="180x180" href="/image/pwa/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/image/pwa/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/image/pwa/16.png"/><link rel="mask-icon" href="/image/pwa/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-11-13 22:12:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/other.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ahzoa/hexo@latest/css/all.css"><meta name="generator" content="Hexo 5.2.0"></head><body><div id="web_bg"></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/hy.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">35</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">4</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-paper-plane"></i><span> 导航</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw far fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 媒体</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 阅读</span></a></li><li><a class="site-page" href="/bangumis/"><i class="fa-fw fas fa-tv"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-link"></i><span> 链接</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw far fa-heart"></i><span> 友情链接</span></a></li><li><a class="site-page" href="/box/"><i class="fa-fw fas fa-star"></i><span> 网址收藏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fas fa-cloud"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux14.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Secular</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-paper-plane"></i><span> 导航</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw far fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 媒体</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 阅读</span></a></li><li><a class="site-page" href="/bangumis/"><i class="fa-fw fas fa-tv"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-link"></i><span> 链接</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw far fa-heart"></i><span> 友情链接</span></a></li><li><a class="site-page" href="/box/"><i class="fa-fw fas fa-star"></i><span> 网址收藏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fas fa-cloud"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Linux系统管理--文件系统管理</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-10-31T16:00:00.000Z" title="发表于 2020-11-01 00:00:00">2020-11-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-13T14:12:00.268Z" title="更新于 2020-11-13 22:12:00">2020-11-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/">linux系统管理</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>22分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="硬盘结构"><a class="markdownIt-Anchor" href="#硬盘结构"></a> 硬盘结构</h2>
<h3 id="硬盘的逻辑结构"><a class="markdownIt-Anchor" href="#硬盘的逻辑结构"></a> 硬盘的逻辑结构</h3>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20201107223121846.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTUwODEw,size_16,color_FFFFFF,t_70#pic_center" alt="" /><br />
每个扇区的大小都是固定的，位512Byte。扇区也是磁盘的最小存储单位。<br />
<img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020110722323061.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTUwODEw,size_16,color_FFFFFF,t_70#pic_center" alt="" /></p>
<p>磁盘的大小是使用**“磁头数X柱面数X扇区数X每个扇区大小”** 这样的公式来计算的。其中磁头数(Heads) 表示硬盘总共有几个磁头，也可以理解为硬盘有几个盘面，然后乘以二；柱面数(Cylinders) 表示硬盘每一面盘片有几条磁条；扇区数(Sectors)表示每条磁道上有几个扇区；每个扇区的大小一般是512Byte。</p>
<h3 id="硬盘接口"><a class="markdownIt-Anchor" href="#硬盘接口"></a> 硬盘接口</h3>
<ul>
<li>IDE硬盘接口（Integrated Drive Electronics，并口，即电子集成驱动）也称作“ATA硬盘”<br />
或“PATA硬盘”，是最早机械硬盘的主要接口，ATA133硬盘的理论速度可以达到<strong>133MB/s</strong>（此速度为理论平均值）。</li>
<li>SATA接口（Serial ATA，串口）是速度更高的硬盘标准，具备了更高的传输速度，并具备了更强的纠错能力。目前已经是STATA三代，理论传输速度达到<strong>600MB/s</strong>（此速度为理论平均值）。</li>
<li>SCSI接口（Small Computer System Interface，小型计算机系统接口）广泛应用在服务器上，具备应用范围广、多任务、带宽大、CPU占用率低及支持热插拔等优点，理论传输速度达到320MB/s。</li>
</ul>
<h2 id="文件系统"><a class="markdownIt-Anchor" href="#文件系统"></a> 文件系统</h2>
<h3 id="linux文件系统的特性"><a class="markdownIt-Anchor" href="#linux文件系统的特性"></a> Linux文件系统的特性</h3>
<ul>
<li>super block（超级块）：记录整个文件系统信息，包括block和inode 的总量。已经使用的block和inode的数量，未使用的block和inode的数量，block与inode的大小，文件系统的挂载时间，最近一次的写入时间，最近一次的磁盘检验时间等。</li>
<li>date block（数据块，也称做block）：用来实际保存数据的（相当于柜子的隔断），block的大小（1KB、2KB或4KB）和数量在格式化后就已经决定，不能改变，除非重新格式化。每个block只能保存一个文件的数据，要是文件数据小于一个block，那么这个block的剩余空间也不能被其他文件使用；要是文件数据大于一个block块，则占用多个block块。Windows中磁盘碎片整理工具的原理就是把一个文件占用的多个block块尽量整理到一起，这样可以加快读写速度。</li>
<li>inode（i节点，相当于柜子的标签）：用来记录文件的权限（r、w、x），文件的所有者和属组，文件的大小，文件的状态改变时间（ctime），文件的最近一次读取时间（atime），文件的最近一次修改时间（mtime），文件的数据整整保存的block编号。每个文件需要占用一个inode。</li>
</ul>
<h3 id="linux常见文件系统"><a class="markdownIt-Anchor" href="#linux常见文件系统"></a> linux常见文件系统</h3>
<table>
<thead>
<tr>
<th>文件系统</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ext</td>
<td>Linux最早的文件系统，由于在性能和兼容性上具有很多缺陷，现在已经很少使用。</td>
</tr>
<tr>
<td>ext2</td>
<td>是 ext 文件系统的升级版本，Red Hat Linux 7.2 版本以前的系统默认都是ext2文件系统。于1993年发布，支持最大16TB的分区和最大2TB的文件。</td>
</tr>
<tr>
<td>ext3</td>
<td>是ext2 文件系统的升级版本，最大的区别就是带日志功能，以便在系统突然停止时提高文件系统的可靠性。支持最大16TB的分区和最大2TB的文件。</td>
</tr>
<tr>
<td>ext4</td>
<td>是ext3文件系统的升级版本。ext4在性能、伸缩性和可靠性方面进行了大量改进。ext4的变化可以说是翻天覆地的，比如向下兼容ext3、最大1EB文件系统和16TB文件、无限数量子目录、Extents连续数据块概念、多块分配、延迟分配、持久预分配、快速FSCK、日志校验、无日志模式、在线碎片整理、inode增强、默认启动barrier等。它是CentOS6.x的默认文件系统。</td>
</tr>
<tr>
<td>xfs</td>
<td>XFS最早针对IRIX操作系统开发，是一个高性能的日志型文件系统，能够在断电以及操作系统崩溃的情况下保证文件系统数据的一致性。它是一个64位的文件系统，后来进行开源并且移植到了Linux操作系统中，目前CentOS7.x将XFS+LVM作为默认的文件系统。据官方所称，XFS对于大文件的读写性能较好。</td>
</tr>
<tr>
<td>swap</td>
<td>swap是Linux中用于交换分区的文件系统（类似于Windows中的虚拟内存），当内存不够用时，使用交换分区暂时替代内存。一般大小为内存的2倍，但是不要超过2GB。它是Linux的必须分区。</td>
</tr>
<tr>
<td>NFS</td>
<td>是网络文件系统（Network File System）的缩写，是用来实现不同主机之间文件共享的一种网络服务，本机可以通过挂载的方式使用远程共享的资源。</td>
</tr>
<tr>
<td>ios9660</td>
<td>光盘的标准文件系统。Linux要想使用光盘，必须支持iso9660文件系统。</td>
</tr>
<tr>
<td>fat</td>
<td>就是Windows下的fat16 文件系统，在Linux中识别为fat。</td>
</tr>
<tr>
<td>vfat</td>
<td>就是windows下的fat32文件系统，在Linux中识别为vfat.支持最大32GB的分区和最大4GB的文件</td>
</tr>
<tr>
<td>NTFS</td>
<td>就是Windows下的NTFS文件系统，不过Linux默认是不能识别NTFS文件系统的，如果需要识别，则需要重新编译内核才能支持，就算是重新编译内核也是只读的。它比fat32 文件系统更加安全，速度更快，支持最大2TB的分区和最大64GB的文件。</td>
</tr>
<tr>
<td>ufs</td>
<td>Sun 公司的操作系统Solaris和SuxOS所采用的文件系统。</td>
</tr>
<tr>
<td>proc</td>
<td>Linux中基于内存的虚拟文件系统，用来管理内存存储目录/proc</td>
</tr>
<tr>
<td>sysfs</td>
<td>和proc一样，也是基于内存的虚拟文件系统，用来管理内存存储目录/sysfs</td>
</tr>
<tr>
<td>tmpfs</td>
<td>也是一种基于内存的虚拟文件系统，不过也可以使用swap交换分区。</td>
</tr>
</tbody>
</table>
<h2 id="常用的硬盘管理命令"><a class="markdownIt-Anchor" href="#常用的硬盘管理命令"></a> 常用的硬盘管理命令</h2>
<h3 id="df命令"><a class="markdownIt-Anchor" href="#df命令"></a> df命令</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# df -ahT</span><br><span class="line">-a  显示特殊文件系统，这些文件系统几乎都是保存在内存中的。如&#x2F;proc，因为是挂载在内存中，所以占用量都是0</span><br><span class="line">-h  单位不再只用KB，而是换算成习惯单位</span><br><span class="line">-T  多出了文件系统类型一例</span><br></pre></td></tr></table></figure>
<h3 id="du命令"><a class="markdownIt-Anchor" href="#du命令"></a> du命令</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# du  [选项]  [目录或文件名] </span><br><span class="line">选项：</span><br><span class="line">-a  显示每个子文件的磁盘占用量。默认只统计子目录的磁盘占有量</span><br><span class="line">-s  统计总占用量，而不列出子目录和子文件的占用量</span><br></pre></td></tr></table></figure>
<p>du 和 df 的区别：du 是用于统计文件大小的，统计的文件大小是准确的；df 是用于统计空间大小的，统计的剩余空间是准确的<br />
lsof | grp deleted   查看被删除的文件，然后一个进程一个进程的手工kill也是可以的</p>
<h3 id="fsck文件系统修复命令"><a class="markdownIt-Anchor" href="#fsck文件系统修复命令"></a> fsck文件系统修复命令</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# fsck -y &#x2F;dev&#x2F;sdb1</span><br><span class="line">#自动修复</span><br></pre></td></tr></table></figure>
<h3 id="显示磁盘状态-dumpe2fs"><a class="markdownIt-Anchor" href="#显示磁盘状态-dumpe2fs"></a> 显示磁盘状态 dumpe2fs</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# dumpe2fs &#x2F;dev&#x2F;sda3 </span><br><span class="line">dumpe2fs 1.41.12 (17-May-2010)</span><br><span class="line">Filesystem volume name:   &lt;none&gt;   		 👈卷标名</span><br><span class="line">Last mounted on:          &#x2F;                       👈挂载点</span><br><span class="line">Filesystem UUID:          c2ca6f57-b15c-43ea-bca0-f239083d8bd2UUID </span><br><span class="line">Filesystem magic number:  0xEF53</span><br><span class="line">Filesystem revision #:    1 (dynamic)</span><br><span class="line">Filesystem  features:            has_journal  ext_attr  resize_inode  dir_index  filetype  needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize</span><br><span class="line">Filesystem flags:         signed_directory_hash  </span><br><span class="line">Default mount options:    user_xattr acl          👈挂载参数</span><br><span class="line">Filesystem state:         clean                     👈文件系统状态，正常</span><br><span class="line">Errors behavior:          Continue</span><br><span class="line">Filesystem OS type:       Linux</span><br><span class="line">Inode count:              1826816             👈inode总数</span><br><span class="line">Block count:              7300864           👈块总素</span><br><span class="line">Reserved block count:     365043</span><br><span class="line">Free blocks:              6634637</span><br><span class="line">Free inodes:              1753533</span><br><span class="line">First block:              0</span><br><span class="line">Block size:               4096                 👈块大小</span><br><span class="line">Fragment size:            4096</span><br><span class="line">Reserved GDT blocks:      1022</span><br><span class="line">Blocks per group:         32768</span><br><span class="line">Fragments per group:      32768</span><br><span class="line">Inodes per group:         8192</span><br><span class="line">Inode blocks per group:   512</span><br><span class="line">Flex block group size:    16</span><br><span class="line">Filesystem created:       Mon Nov 12 22:30:41 2012</span><br><span class="line">Last mount time:          Tue Apr  9 23:53:29 2013</span><br><span class="line">Last write time:         Mon Nov 12 22:45:55 2012</span><br><span class="line">Mount count:             3</span><br><span class="line">Maximum mount count:     -1</span><br><span class="line">Last checked:             	 Mon Nov 12 22:30:41 2012</span><br><span class="line">Check interval:           	0 (&lt;none&gt;)</span><br><span class="line">Lifetime writes:          	3199 MB</span><br><span class="line">Reserved blocks uid:      0 (user root)</span><br><span class="line">Reserved blocks gid:      0 (group root)</span><br><span class="line">First inode:              			11Inode size:               256		👈inode的大小</span><br><span class="line">...省略部分输出... </span><br><span class="line">Group 0: (Blocks 0-32767) [ITABLE_ZEROED]           👈第一个数据组的内容</span><br><span class="line">校验和 0xcb85,8179个未使用的inode</span><br><span class="line">主 superblock at 0, Group descriptors at 1-2 </span><br><span class="line">保留的GDT块位于 3-1024  </span><br><span class="line">Block bitmap at 1025 (+1025), Inode bitmap at 1041 (+1041)  </span><br><span class="line">Inode表位于 1057-1568 (+1057)  </span><br><span class="line">23513 free blocks, 8179 free inodes, 2 directories, 8179个未使用的inodes</span><br><span class="line">可用块数: 9255-32767</span><br><span class="line">可用inode数: 14-8192</span><br><span class="line">...省略部分输出... </span><br></pre></td></tr></table></figure>
<h3 id="查看文件的详细时间"><a class="markdownIt-Anchor" href="#查看文件的详细时间"></a> 查看文件的详细时间</h3>
<p>stat    文件名     查看文件的详细时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# stat testfile </span><br><span class="line">  File：&quot;testfile&quot;</span><br><span class="line">  Size：18968     	Blocks：40         IO Blocks：4096   regular file</span><br><span class="line">  #文件大小             占用块                   系统分区块大小</span><br><span class="line">Device：fd00h&#x2F;64768d	Inode：33575012    Links(硬链接)：1</span><br><span class="line"> #存放文件的设备 Inode 号                               硬链接数</span><br><span class="line">Access：(0644&#x2F;-rw-r--r--)  Uid：(    0&#x2F;    root)   Gid：(    0&#x2F;    root)</span><br><span class="line"># 权限       属主       属组</span><br><span class="line">Context：unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">Access：2020-10-30 16:10:44.549238248 +0800</span><br><span class="line">Modify：2020-10-30 16:10:44.549238248 +0800</span><br><span class="line">Change：2020-10-30 16:10:44.549238248 +0800</span><br><span class="line"></span><br><span class="line">#Context环境        access访问时间            modify数据修改时间            change状态修改时间</span><br></pre></td></tr></table></figure>
<h3 id="判断文件类型"><a class="markdownIt-Anchor" href="#判断文件类型"></a> 判断文件类型</h3>
<p>file  文件名                     判断文件类型<br />
type 命令名                   判断命令类型</p>
<h2 id="fdisk-命令手工分区"><a class="markdownIt-Anchor" href="#fdisk-命令手工分区"></a> fdisk 命令手工分区</h2>
<h3 id="fdisk-l"><a class="markdownIt-Anchor" href="#fdisk-l"></a> fdisk -l</h3>
<p>查看系统所有硬盘及分区</p>
<h3 id="fdisk-devsdb-进行磁盘分区-分区还没有分区号"><a class="markdownIt-Anchor" href="#fdisk-devsdb-进行磁盘分区-分区还没有分区号"></a> fdisk  /dev/sdb 进行磁盘分区 （分区还没有分区号）</h3>
<p>fdisk 交互指令说明：</p>
<table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a</td>
<td style="text-align:center">设置可引导标记</td>
</tr>
<tr>
<td style="text-align:center">b</td>
<td style="text-align:center">编辑bsd此怕标签</td>
</tr>
<tr>
<td style="text-align:center">c</td>
<td style="text-align:center">设置DOS操作系统兼容标记</td>
</tr>
<tr>
<td style="text-align:center">d</td>
<td style="text-align:center">删除一个分区</td>
</tr>
<tr>
<td style="text-align:center">l</td>
<td style="text-align:center">显示已知的文件系统类型。82为linux swap分区，83为Linux分区</td>
</tr>
<tr>
<td style="text-align:center">m</td>
<td style="text-align:center">显示帮助菜单</td>
</tr>
<tr>
<td style="text-align:center">n</td>
<td style="text-align:center">新建分区</td>
</tr>
<tr>
<td style="text-align:center">o</td>
<td style="text-align:center">建立空白DOS分区列表</td>
</tr>
<tr>
<td style="text-align:center">p</td>
<td style="text-align:center">显示分区列表</td>
</tr>
<tr>
<td style="text-align:center">q</td>
<td style="text-align:center">不保存退出</td>
</tr>
<tr>
<td style="text-align:center">s</td>
<td style="text-align:center">新建空白SUN磁盘标签</td>
</tr>
<tr>
<td style="text-align:center">t</td>
<td style="text-align:center">改变一个分区的系统ID</td>
</tr>
<tr>
<td style="text-align:center">u</td>
<td style="text-align:center">改变显示记录单位</td>
</tr>
<tr>
<td style="text-align:center">v</td>
<td style="text-align:center">验证分区表</td>
</tr>
<tr>
<td style="text-align:center">w</td>
<td style="text-align:center">保存退出</td>
</tr>
<tr>
<td style="text-align:center">x</td>
<td style="text-align:center">附加功能</td>
</tr>
</tbody>
</table>
<blockquote>
<p>n—p主----1分区号----1起始柱面-----分区大小+100M-----w<br />
n—e扩展—2分区号—124起始柱面----1024柱面（所有剩余空间都分配给扩展分区）<br />
n—1逻辑—不用指定分区号—124起始柱面----+100M（指定大小）-----w</p>
</blockquote>
<p>有时因为系统的分区表正忙，则需要重新重启系统之后才能使新的分区表生效。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Command (m for help): w 👈保存退出</span><br><span class="line">The partition table has been altered!</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">WARNING: Re-reading the partition table failed with error 16: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Device or resource busy. </span><br><span class="line">The kernel still uses the old table.</span><br><span class="line">The new table will be used at the next reboot. 👈要求重启动，才能格式化</span><br><span class="line">Syncing disks</span><br></pre></td></tr></table></figure>
<h3 id="partprobe-非必须"><a class="markdownIt-Anchor" href="#partprobe-非必须"></a> partprobe （非必须）</h3>
<p>强制重读所有分区文件，重新挂载分区文件内所有分区。这不是分区必须命令，如果没有提示重启，可以不执行，也可以重启系统。</p>
<blockquote>
<p>（Warning: Unable to open /dev/hdc read-write (Read-only file system).  /dev/hdc has been opened read-only.<br />
光盘只读挂载，不是报错。</p>
</blockquote>
<p>如果这个命令不存在请安装parted-2.1-18.el6.i686这个软件包</p>
<h3 id="格式化"><a class="markdownIt-Anchor" href="#格式化"></a> 格式化</h3>
<p>格式化 建立文件系统    ext4是linux默认文件系统<br />
mkfs  -f  ext4  /dev/sdb1<br />
mkfs  -f  ext4  /dev/sdb5<br />
mkfs 命令简单易用，不过是不能调整分区的默认参数的（比如块大小是4096），这些默认参数除非特殊情况下，否则不需要调整，如果想要调整就需要使用 mke2fs 命令进行重新格式化，命令格式化如下(不建议修改）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mke2fs  [选项]  分区设备文件名</span><br><span class="line">选项：</span><br><span class="line">-t  文件系统：  指定格式化成哪个文件系统，如ext2 、ext3、ext4</span><br><span class="line">-b 字节：  指定block块的大小</span><br><span class="line">-i 字节：  指定“字节&#x2F;inode”的比例，也就是多少个字节分配一个inode</span><br><span class="line">-j： 建立带有ext3日志功能的文件系统</span><br><span class="line">-L：卷标名：给文件系统设置卷标名，就不使用e2label 命令设定了</span><br><span class="line"></span><br><span class="line">举个例子：</span><br><span class="line">[root@localhost ~]# mke2fs -t ext4 -b 2048 &#x2F;dev&#x2F;sdb6</span><br><span class="line">#格式化分区，并指定block的大小为2048</span><br></pre></td></tr></table></figure>
<h3 id="挂载"><a class="markdownIt-Anchor" href="#挂载"></a> 挂载</h3>
<p>mdir /disk1 #建立挂载点   👉   /dev/sdb1     #把 sdb1 打算挂载到 /disk1 目录中<br />
mkdir /disk5          👉    /dev/sdb5</p>
<p>mount  /dev/sdb1  /disk1     #把sdb1挂载到 /disk1 目录下<br />
mount  /dev/sdb5  /disk5</p>
<h3 id="查看"><a class="markdownIt-Anchor" href="#查看"></a> 查看</h3>
<p>mount   查看所有已经挂载的分区和光盘<br />
fdisk  -l   查看系统分区<br />
df   查看分区占用百分比</p>
<h3 id="自动挂载"><a class="markdownIt-Anchor" href="#自动挂载"></a> 自动挂载</h3>
<p>修改分区自动挂载文件<br />
vi  /etc/fstab       注意：此文件直接参与系统启动，如果修改错误，系统启动报错</p>
<p>/dev/sdb1		/disk1		ext3		  defaults		1   2<br />
第一列：设备文件名<br />
第二列：挂载点<br />
第三列：文件系统<br />
第四列：挂载选项<br />
第五列： 1  是否可以被备份    0不备份   1每天备份   2不定期备份<br />
第六列： 2 是否检测磁盘fsck  0不检测   1启动时检测  2启动后检测</p>
<p>也可以使用UUID进行挂载，UUID（硬盘通用唯一识别码，可以理解为硬盘的ID）</p>
<ul>
<li>这个字段在CentOS 5.5的系统当中是写入分区的卷标名或分区设备文件名的，现在变成了硬盘的UUID，这样的好处是当硬盘增加了新的分区，或者分区的顺序改变，再或者内核升级后，仍然能够保证分区能够正确加载，而至于造成启动障碍</li>
<li>那么每个分区的UUID到底是什么呢？我们讲过的dumpe2fs命令是可以查看到的，命令如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# dumpe2fs  &#x2F;dev&#x2F;sdb5</span><br><span class="line">或</span><br><span class="line">[root@localhost ~]# ls  -l  &#x2F;dev&#x2F;disk&#x2F;by-uuid&#x2F;</span><br></pre></td></tr></table></figure>
<h3 id="重启测试"><a class="markdownIt-Anchor" href="#重启测试"></a> 重启测试</h3>
<p>mount  -a 重新挂载所有内容，用它进行测试</p>
<h2 id="etcfstab-文件修复"><a class="markdownIt-Anchor" href="#etcfstab-文件修复"></a> /etc/fstab/ 文件修复</h2>
<p>/etc/fstab配置文件内容输入错误，重启会发生报错：<br />
<img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20201112203125750.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTUwODEw,size_16,color_FFFFFF,t_70#pic_center" alt="" /></p>
<p>首先要拿到报错本机（看上图），输入root密码似乎能解决。输入root密码后进入系统把文件修改正确，这时会发现无法修改该文件。<br />
分析原因：我们不是对这个文件没有写权限，而是在挂载之后整个分区被挂载为只读，导致无法写入。<br />
<img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20201112204406772.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTUwODEw,size_16,color_FFFFFF,t_70#pic_center" alt="vim编辑器内报错" /><br />
那么我们只要把 / 分区重新挂载下，挂载为读写权限就可以了，操作命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mount  -o  remount,rw  &#x2F;</span><br></pre></td></tr></table></figure>
<p>接下来再去修改/etc/fstab文件，改正确系统就可以正常启动了。</p>
<h2 id="parted-命令分区"><a class="markdownIt-Anchor" href="#parted-命令分区"></a> parted 命令分区</h2>
<p>Linux系统中有两种常见的分区表MBR分区表（主引导记录分区表）和GPT分区表（GUID分区表），其中：</p>
<ul>
<li>MBR分区表：支持的最大分区是2TB；最多支持4个主分区，或3个主分区1个扩展分区。</li>
<li>GPT分区表：支持最大的18EB的分区（1EB=1024PB，1PB=1024TB）；最多支持128个分区，其中1个系统保留分区，127个用户自定义分区。</li>
</ul>
<p>不过parted命令也有点小问题，就是命令自身分区的时候只能格式化成 ext2 文件系统，不支持 ext3和etx4 文件系统（截至CentOS 6.8 还是这样，这里只是指不能用 parted 命令把分区格式化成 ext4 文件系统，但是 parted 命令还是可以识别ext4文件系统的）。不过没有太大影响，因为我们可以先分区再用 mkfs 进行格式化。</p>
<h3 id="parted交互模式"><a class="markdownIt-Anchor" href="#parted交互模式"></a> parted交互模式：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# parted  &#x2F;dev&#x2F;sdb</span><br><span class="line">#打算继续划分 &#x2F;dev&#x2F;sdb硬盘</span><br><span class="line">GUN  Parted  2.1</span><br><span class="line">使用  &#x2F;dev&#x2F;sdb</span><br><span class="line">Welcome to GNU Parted! Type &#39;help&#39; to view a list of commands.</span><br><span class="line">(parted)       👈parted 的等待输入交互命令的位置</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">parted交互命令</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">check NUMBER</td>
<td style="text-align:center">做一次简单的文件系统检测</td>
</tr>
<tr>
<td style="text-align:center">cp [FROM-DEVICE] FROM-NUMBER TO-NUMBER</td>
<td style="text-align:center">复制文件系统到另一个分区</td>
</tr>
<tr>
<td style="text-align:center">help [COMMAND]</td>
<td style="text-align:center">显示所有的命令帮助</td>
</tr>
<tr>
<td style="text-align:center">mklabel,mktable LABEL-TYPE</td>
<td style="text-align:center">创建新的磁盘卷标（分区表）</td>
</tr>
<tr>
<td style="text-align:center">mkfs NUMBER FS-TYPE</td>
<td style="text-align:center">在分区上建立文件系统</td>
</tr>
<tr>
<td style="text-align:center">mkpart PART-TYPE [FS-TYPE] START END</td>
<td style="text-align:center">创建一个分区</td>
</tr>
<tr>
<td style="text-align:center">mkpartfs PART-TYPE FS-TYPE START END</td>
<td style="text-align:center">创建分区，并建立文件系统</td>
</tr>
<tr>
<td style="text-align:center">move NUMBER START END</td>
<td style="text-align:center">移动分区</td>
</tr>
<tr>
<td style="text-align:center">name NUMBER NAME</td>
<td style="text-align:center">给分区命名</td>
</tr>
<tr>
<td style="text-align:center">print [devices</td>
<td style="text-align:center">free</td>
</tr>
<tr>
<td style="text-align:center">quit</td>
<td style="text-align:center">退出</td>
</tr>
<tr>
<td style="text-align:center">rescue START END</td>
<td style="text-align:center">修复丢失的分区</td>
</tr>
<tr>
<td style="text-align:center">resize NUMBER START END</td>
<td style="text-align:center">修改分区大小</td>
</tr>
<tr>
<td style="text-align:center">rm NUMBER</td>
<td style="text-align:center">删除分区</td>
</tr>
<tr>
<td style="text-align:center">select DEVICE</td>
<td style="text-align:center">选择需要编辑的设备</td>
</tr>
<tr>
<td style="text-align:center">set NUMBER FLAG STATE</td>
<td style="text-align:center">改变分区标记</td>
</tr>
<tr>
<td style="text-align:center">toggle [NUMBER [FLAG]]</td>
<td style="text-align:center">切换分区表的状态</td>
</tr>
<tr>
<td style="text-align:center">unit UNIT</td>
<td style="text-align:center">设置默认的单位</td>
</tr>
<tr>
<td style="text-align:center">Version</td>
<td style="text-align:center">显示版本</td>
</tr>
</tbody>
</table>
<h3 id="建立分区"><a class="markdownIt-Anchor" href="#建立分区"></a> 建立分区</h3>
<h4 id="查看分区"><a class="markdownIt-Anchor" href="#查看分区"></a> 查看分区</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(parted) print</span><br><span class="line">#输入 print 指令</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)    👈 ying&#39;pan&#39;ca</span><br><span class="line">Disk &#x2F;dev&#x2F;sdb: 21.5GB            👈硬盘大小</span><br><span class="line">Sector size (logical&#x2F;physical): 512B&#x2F;512B    👈扇区大小</span><br><span class="line">Partition Table: msdos    👈分区表类型，就是MBR分区</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    Type      File system  标志</span><br><span class="line"> 1      32.3kB  5379MB  5379MB  primary</span><br><span class="line"> 2      5379MB  21.5GB  16.1GB  extended</span><br><span class="line"> 5      5379MB  7534MB  2155MB  logical   ext4</span><br><span class="line"> 6      7534MB  9689MB  2155MB  logical   ext4</span><br><span class="line">#看到了我们使用的 fdisk 分的区，其中 1 分区没有格式化， 2 分区是扩展分区不能格式化</span><br></pre></td></tr></table></figure>
<p>使用print 可以查看分区表信息，包括硬盘参数，扇区大小，分区表类型和分区信息。分区信息总共七列，分别是：</p>
<ul>
<li>Number：分区号</li>
<li>Start：分区起始位置，这里不再像 fdisk 用柱面表示，而是使用 Byte 更加直观</li>
<li>End：分区结束位置</li>
<li>Type：分区类型</li>
<li>File system：文件系统类型，之前说过 parted 不支持 etx4 。注意，之前一直说的都是 parted 不能直接把分区直接格式化成 etx4 文件系统，但是它是可以识别的。</li>
<li>标志：Flages，就是分区的标记</li>
</ul>
<h4 id="修改gpt分区表"><a class="markdownIt-Anchor" href="#修改gpt分区表"></a> 修改GPT分区表</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(parted) mklabel  gpt</span><br><span class="line">#修改分区命令</span><br><span class="line">警告：正在使用 &#x2F;dev&#x2F;sdb 上的分区。       👈由于 &#x2F;dev&#x2F;sdb 分区已经挂载，所以有警告</span><br><span class="line">                                       👈注意如果强制修改，原有分区及数据会消失</span><br><span class="line">忽略&#x2F;Ignore&#x2F; 放弃&#x2F;Cancel？ ignore       👈输入 ignore 忽略报错</span><br><span class="line">警告：The existing disk label on &#x2F;dev&#x2F;sdb will be destroyed and all data on this disk will</span><br><span class="line">be lost. Do you  want to continue?</span><br><span class="line">是&#x2F;Yes&#x2F;否&#x2F;No？ yes             👈输入yes</span><br><span class="line">警告：WARNING: the kernel failed to re-read the partition table on &#x2F;dev&#x2F;sdb (设备或资源忙).  As a result, it may not reflect all of your changes until after reboot.    👈下次重启后，才能生效</span><br><span class="line"></span><br><span class="line">(parted) print                 👈查看下分区表吧</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk  &#x2F;dev&#x2F;sdb：21.5G</span><br><span class="line">Sector size (logical&#x2F;physical): 512B&#x2F;512B</span><br><span class="line">Partition Table: gpt            👈分区表已经变成GPT</span><br><span class="line"></span><br><span class="line">Number Start End Size File system Name 标志</span><br><span class="line">                                           👈所有分区都消失了</span><br></pre></td></tr></table></figure>
<p>修改了分区表，如果这块硬盘已经有了分区，那么原有分区和分区中的书籍都会消失，而且需要重启系统才会生效。<br />
还又我们转换分区表的目的是为了支持大于2TB的分区，如果分区并没有大于2TB，那么这步是不可以执行的。</p>
<blockquote>
<p>注意：一定要把 /etc/fstab 文件中和原有分区的内容删除掉，才能重启动。否则系统启动就一定会报错的。</p>
</blockquote>
<h4 id="建立分区-2"><a class="markdownIt-Anchor" href="#建立分区-2"></a> 建立分区</h4>
<p>因为修改过了分区表，所以 /dev/sdb 中的所有数据都消失了，所以我们可以重新对这块硬盘分区了。不过建立分区时，默认文件系统就只能建立成 etx2 了，命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(parted)  mkpart</span><br><span class="line">#输入创建分区命令，后面不要参数，全部靠交互指令</span><br><span class="line">分区名称？  [ ]? disk1         👈分区名称，我起名叫disk1 </span><br><span class="line">文件系统类型？  [ext2]?       👈文件系统类型，直接回车，使用默认ext2 </span><br><span class="line">起始点？ 1MB                  👈分区从1MB开始</span><br><span class="line">结束点？ 5GB      👈分区到5GB结束</span><br><span class="line">#分区完成</span><br><span class="line">(parted) print              查看下吧</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk &#x2F;dev&#x2F;sdb: 21.5GB</span><br><span class="line">Sector size (logical&#x2F;physical): 512B&#x2F;512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Number  Start   End     Size    File system  Name  标志</span><br><span class="line">1      1049kB  5000MB  4999MB               disk1分区1已经出现</span><br></pre></td></tr></table></figure>
<p>注意，我们现在的 print 查看的分区，和第一次查看MBR 分区表的分区时有些不一样了，少了Type这个字段，也就是分区类型的字段，多了 Name 分区名字段。分区类型是标识主分区、扩展分区和逻辑分区的，不过这种标识只在 MBR 分区表中使用，我们现在已经变成了GPT分区表了，所以不再有 Type 类型了。</p>
<h4 id="建立文件系统"><a class="markdownIt-Anchor" href="#建立文件系统"></a> 建立文件系统</h4>
<p>分区完毕，我们还需要格式化。不过我们已经知道如果使用 parted 交互命令格式化的话，只能格式化成ext2文件系统。我们这里是要演示下 parted 命令的格式化方法，所以就格式化成 ext2 ，命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(parted) mkfs</span><br><span class="line">#格式化命令（很奇怪也是 mkfs ，但是这只是parted的交互命令）</span><br><span class="line">WARNING: you are attempting to use parted to operate on (mkfs) a file system.parted&#39;s file system manipulation code is not as robust as what you&#39;ll find indedicated, file-system-specific packages like e2fsprogs.  We recommend you use parted only to manipulate partition tables, whenever possible. Support for performing most operations on most types of file systemswill be removed in an upcoming release.</span><br><span class="line">警告： The existing file system will be destroyed and all data on the partition will be lost. Do you want to continue?</span><br><span class="line">是&#x2F;Yes&#x2F;否&#x2F;No？ yes     👈警告你格式化数据会丢失。</span><br><span class="line">分区编号？ 1</span><br><span class="line">文件系统类型？ [ext2]      👈指定文件系统类型，写别的也没有用</span><br><span class="line"></span><br><span class="line">(parted) print      👈格式化完成，查看下结构</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk：&#x2F;dev&#x2F;sdb：21.5G</span><br><span class="line">Sector size （logical&#x2F;physical）：512B&#x2F;512B</span><br><span class="line">Partition Table：gpt</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    File system  Name   标志</span><br><span class="line">1          1049KB  5000MB  4999MB  ext2     disk        👈拥有了文件系统</span><br></pre></td></tr></table></figure>
<p>如果要格式成 ext4 文件系统，请 mkfs 命令帮忙（注意这里不是parted交互命令中的 mkfs ，而是系统命令 mkfs）。</p>
<h4 id="调整分区大小"><a class="markdownIt-Anchor" href="#调整分区大小"></a> 调整分区大小</h4>
<p>parted 命令还有一大优势，就是可以调整分区大小（windows中也可以实现，不过要不需要转换成动态磁盘<br />
，要不需要依赖第三方工具，如硬盘分区魔术师）。起始 Linux 中 LVM 和 RAID 是可以支持分区调整的，不过这两种方法也可以看成是动态磁盘方法，这个会在下一章介绍。使用parted命令调整分区要更加简单。</p>
<blockquote>
<p>注意：parted调整已经挂载使用的分区时，是不会影响分区中的数据的，也就是说数据不会丢失。但是一定要<strong>先卸载分区</strong>，在调整分区大小，否则数据是会出现问题的。还有要调整大小的分区必须已经建立了文件系统（格式化），否则会报错。</p>
</blockquote>
<p>命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(parted) resize</span><br><span class="line">分区编号？ 1    👈指定要修改的分区编号</span><br><span class="line">起始点？ [1049KB]? 1MB     👈分区起始位置</span><br><span class="line">结束点？ [5000MB]？ 6GB     👈分区结束位置</span><br><span class="line">(parted) print         👈查看下</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk &#x2F;dev&#x2F;sdb: 21.5GB</span><br><span class="line">Sector size (logical&#x2F;physical): 512B&#x2F;512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    File system  Name   标志</span><br><span class="line"> 1      1049kB  6000MB  5999MB  ext2         disk1       👈分区大小改变</span><br></pre></td></tr></table></figure>
<h4 id="删除分区"><a class="markdownIt-Anchor" href="#删除分区"></a> 删除分区</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(parted) rm</span><br><span class="line">#删除分区命令</span><br><span class="line">分区编号？ 1     👈指定分区号</span><br><span class="line">(parted) print    👈查看下</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk &#x2F;dev&#x2F;sdb: 21.5GB</span><br><span class="line">Sector size (logical&#x2F;physical): 512B&#x2F;512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line"></span><br><span class="line">Number  Start  End  Size  File system  Name  标志    👈分区消失</span><br></pre></td></tr></table></figure>
<p>注意：parted中所有的操作都是立即生效，没有保存的概念。这点和 fdiskjiaohuml明显不同，所以所有操作要加倍小心。<br />
那么到底是使用 fdisk 进行分区还是 parted 命令，这个完全看个人习惯，这里更习惯于fdisk命令。</p>
<h2 id="分配swap-分区"><a class="markdownIt-Anchor" href="#分配swap-分区"></a> 分配swap 分区</h2>
<h3 id="分区并修改为-swap-分区-id"><a class="markdownIt-Anchor" href="#分区并修改为-swap-分区-id"></a> 分区，并修改为 swap 分区 ID</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# fdisk  &#x2F;dev&#x2F;sdb</span><br><span class="line">#拿 &#x2F;dev&#x2F;sdb 分区</span><br><span class="line">Command (m for help): t    👈修改分区的系统ID</span><br><span class="line">Selected partition 1    👈只有一个分区，所以不用选择分区了</span><br><span class="line">Hex code (type L to list codes): 82    👈改为swap的ID</span><br><span class="line">Changed system type of partition 1 to 82 (Linux swap &#x2F; Solaris)</span><br></pre></td></tr></table></figure>
<h3 id="格式化-2"><a class="markdownIt-Anchor" href="#格式化-2"></a> 格式化</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mkswap  &#x2F;dev&#x2F;sdb1</span><br><span class="line">Setting up swapspace version 1, size &#x3D; 522076 KiBno label, UUID&#x3D;c3351dc3-f403-419a-9666-c24615e170fb</span><br></pre></td></tr></table></figure>
<h3 id="使用-swap-分区"><a class="markdownIt-Anchor" href="#使用-swap-分区"></a> 使用 swap 分区</h3>
<p>在使用 swap 分区之前，我们先说说 free 命令，命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# free</span><br><span class="line">             total       used       free     shared    buffers(缓冲)     cached(缓存)</span><br><span class="line">Mem:        1030796     130792     900004          0      15292      55420</span><br><span class="line">-&#x2F;+ buffers&#x2F;cache:      60080     970716</span><br><span class="line">Swap:      2047992          0    2047992</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# swapon  分区设备文件名</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">[root@localhost ~]# swapon  &#x2F;dev&#x2F;sdb1</span><br></pre></td></tr></table></figure>
<p>让 swap 分区开机之后自动挂载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;dev&#x2F;sdb1               swap               swap      defaults         0  0</span><br><span class="line">#加入新 swap 分区的相关内容，我这里是直接使用的分区的设备文件名，大家当然也可以使用UUID号</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">The Kun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.wanchelai.com/2020/11/01/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/">http://www.wanchelai.com/2020/11/01/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.wanchelai.com" target="_blank">Secular</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux/">linux</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux14.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/11/13/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E9%AB%98%E7%BA%A7%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86(1)/"><img class="prev-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux15.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux系统管理--高级文件系统管理(1)</div></div></a></div><div class="next-post pull-right"><a href="/2020/10/26/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux13.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux系统管理--权限管理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/11/20/Linux系统管理--Shell基础/" title="Linux系统管理--Shell基础"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux17.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-20</div><div class="title">Linux系统管理--Shell基础</div></div></a></div><div><a href="/2020/11/17/Linux系统管理--高级文件系统管理(2)/" title="Linux系统管理--高级文件系统管理(2)"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux16.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-17</div><div class="title">Linux系统管理--高级文件系统管理(2)</div></div></a></div><div><a href="/2020/11/13/Linux系统管理--高级文件系统管理(1)/" title="Linux系统管理--高级文件系统管理(1)"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux15.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-13</div><div class="title">Linux系统管理--高级文件系统管理(1)</div></div></a></div><div><a href="/2020/10/26/Linux系统管理--权限管理/" title="Linux系统管理--权限管理"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux13.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-26</div><div class="title">Linux系统管理--权限管理</div></div></a></div><div><a href="/2020/10/17/Linux系统管理--用户管理/" title="Linux系统管理--用户管理"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux12.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-17</div><div class="title">Linux系统管理--用户管理</div></div></a></div><div><a href="/2020/10/15/Linux系统管理--软件包管理(3)/" title="Linux系统管理--软件包管理(3)"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux11.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-15</div><div class="title">Linux系统管理--软件包管理(3)</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/hy.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">The Kun</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length_num">35</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length_num">4</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length_num">3</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/kthxbi4" target="_blank" title="Github"><i class="iconfont icon-github card_icon"></i></a><a class="social-icon" href="mailto:489484418@qq.com" target="_blank" title="Email"><i class="fa fa-envelope"></i></a><a class="social-icon" href="https://steamcommunity.com/profiles/76561198346837639/" target="_blank" title=""><i class="iconfont icon-steam_icon card_icon"></i></a><a class="social-icon" href="https://space.bilibili.com/285208049" target="_blank" title=""><i class="iconfont icon-bilibili card_icon"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text"> 硬盘结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E7%9A%84%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text"> 硬盘的逻辑结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.2.</span> <span class="toc-text"> 硬盘接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.</span> <span class="toc-text"> 文件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">2.1.</span> <span class="toc-text"> Linux文件系统的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.2.</span> <span class="toc-text"> linux常见文件系统</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E7%A1%AC%E7%9B%98%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-number">3.</span> <span class="toc-text"> 常用的硬盘管理命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#df%E5%91%BD%E4%BB%A4"><span class="toc-number">3.1.</span> <span class="toc-text"> df命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#du%E5%91%BD%E4%BB%A4"><span class="toc-number">3.2.</span> <span class="toc-text"> du命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fsck%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E4%BF%AE%E5%A4%8D%E5%91%BD%E4%BB%A4"><span class="toc-number">3.3.</span> <span class="toc-text"> fsck文件系统修复命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E7%A3%81%E7%9B%98%E7%8A%B6%E6%80%81-dumpe2fs"><span class="toc-number">3.4.</span> <span class="toc-text"> 显示磁盘状态 dumpe2fs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E7%9A%84%E8%AF%A6%E7%BB%86%E6%97%B6%E9%97%B4"><span class="toc-number">3.5.</span> <span class="toc-text"> 查看文件的详细时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.6.</span> <span class="toc-text"> 判断文件类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fdisk-%E5%91%BD%E4%BB%A4%E6%89%8B%E5%B7%A5%E5%88%86%E5%8C%BA"><span class="toc-number">4.</span> <span class="toc-text"> fdisk 命令手工分区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#fdisk-l"><span class="toc-number">4.1.</span> <span class="toc-text"> fdisk -l</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fdisk-devsdb-%E8%BF%9B%E8%A1%8C%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA-%E5%88%86%E5%8C%BA%E8%BF%98%E6%B2%A1%E6%9C%89%E5%88%86%E5%8C%BA%E5%8F%B7"><span class="toc-number">4.2.</span> <span class="toc-text"> fdisk  &#x2F;dev&#x2F;sdb 进行磁盘分区 （分区还没有分区号）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#partprobe-%E9%9D%9E%E5%BF%85%E9%A1%BB"><span class="toc-number">4.3.</span> <span class="toc-text"> partprobe （非必须）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">4.4.</span> <span class="toc-text"> 格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD"><span class="toc-number">4.5.</span> <span class="toc-text"> 挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B"><span class="toc-number">4.6.</span> <span class="toc-text"> 查看</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD"><span class="toc-number">4.7.</span> <span class="toc-text"> 自动挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%90%AF%E6%B5%8B%E8%AF%95"><span class="toc-number">4.8.</span> <span class="toc-text"> 重启测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#etcfstab-%E6%96%87%E4%BB%B6%E4%BF%AE%E5%A4%8D"><span class="toc-number">5.</span> <span class="toc-text"> &#x2F;etc&#x2F;fstab&#x2F; 文件修复</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#parted-%E5%91%BD%E4%BB%A4%E5%88%86%E5%8C%BA"><span class="toc-number">6.</span> <span class="toc-text"> parted 命令分区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#parted%E4%BA%A4%E4%BA%92%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.1.</span> <span class="toc-text"> parted交互模式：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E5%88%86%E5%8C%BA"><span class="toc-number">6.2.</span> <span class="toc-text"> 建立分区</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%88%86%E5%8C%BA"><span class="toc-number">6.2.1.</span> <span class="toc-text"> 查看分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9gpt%E5%88%86%E5%8C%BA%E8%A1%A8"><span class="toc-number">6.2.2.</span> <span class="toc-text"> 修改GPT分区表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E5%88%86%E5%8C%BA-2"><span class="toc-number">6.2.3.</span> <span class="toc-text"> 建立分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">6.2.4.</span> <span class="toc-text"> 建立文件系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F"><span class="toc-number">6.2.5.</span> <span class="toc-text"> 调整分区大小</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%88%86%E5%8C%BA"><span class="toc-number">6.2.6.</span> <span class="toc-text"> 删除分区</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%85%8Dswap-%E5%88%86%E5%8C%BA"><span class="toc-number">7.</span> <span class="toc-text"> 分配swap 分区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%8C%BA%E5%B9%B6%E4%BF%AE%E6%94%B9%E4%B8%BA-swap-%E5%88%86%E5%8C%BA-id"><span class="toc-number">7.1.</span> <span class="toc-text"> 分区，并修改为 swap 分区 ID</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96-2"><span class="toc-number">7.2.</span> <span class="toc-text"> 格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-swap-%E5%88%86%E5%8C%BA"><span class="toc-number">7.3.</span> <span class="toc-text"> 使用 swap 分区</span></a></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/11/20/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--Shell%E5%9F%BA%E7%A1%80/" title="Linux系统管理--Shell基础"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux17.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统管理--Shell基础"/></a><div class="content"><a class="title" href="/2020/11/20/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--Shell%E5%9F%BA%E7%A1%80/" title="Linux系统管理--Shell基础">Linux系统管理--Shell基础</a><time datetime="2020-11-19T16:00:00.000Z" title="发表于 2020-11-20 00:00:00">2020-11-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/17/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E9%AB%98%E7%BA%A7%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86(2)/" title="Linux系统管理--高级文件系统管理(2)"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux16.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统管理--高级文件系统管理(2)"/></a><div class="content"><a class="title" href="/2020/11/17/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E9%AB%98%E7%BA%A7%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86(2)/" title="Linux系统管理--高级文件系统管理(2)">Linux系统管理--高级文件系统管理(2)</a><time datetime="2020-11-16T16:00:00.000Z" title="发表于 2020-11-17 00:00:00">2020-11-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/13/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E9%AB%98%E7%BA%A7%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86(1)/" title="Linux系统管理--高级文件系统管理(1)"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux15.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统管理--高级文件系统管理(1)"/></a><div class="content"><a class="title" href="/2020/11/13/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E9%AB%98%E7%BA%A7%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86(1)/" title="Linux系统管理--高级文件系统管理(1)">Linux系统管理--高级文件系统管理(1)</a><time datetime="2020-11-12T16:00:00.000Z" title="发表于 2020-11-13 00:00:00">2020-11-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/01/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/" title="Linux系统管理--文件系统管理"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux14.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统管理--文件系统管理"/></a><div class="content"><a class="title" href="/2020/11/01/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/" title="Linux系统管理--文件系统管理">Linux系统管理--文件系统管理</a><time datetime="2020-10-31T16:00:00.000Z" title="发表于 2020-11-01 00:00:00">2020-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/10/26/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" title="Linux系统管理--权限管理"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Kthxbi4/images/cover_picture/lux13.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统管理--权限管理"/></a><div class="content"><a class="title" href="/2020/10/26/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86--%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" title="Linux系统管理--权限管理">Linux系统管理--权限管理</a><time datetime="2020-10-25T16:00:00.000Z" title="发表于 2020-10-26 00:00:00">2020-10-26</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020  <i id="heartbeat" class="fa fas fa-heartbeat"></i> The Kun</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="http://www.wanchelai.com/">blog</a>!</div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></head></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    $.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js', function () {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: '5eiehMYVOOVcnKMxA6g97OTI-MdYXbMMI',
      appKey: 'LJvS2AG393gyE7RhK1c5LKiK',
      placeholder: '有什么问题请在这里留言。',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '//i0.hdslb.com/bfs/emote/',
      emojiMaps: {"2020":"dc709fac0d361370bcf0d36d32adb97df7c95824.png","tv_白眼":"c1d59f439e379ee50eef488bcb5e5378e5044ea4.png","tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_难过":"87f46748d3f142ebc6586ff58860d0e2fc8263ba.png","tv_生气":"26702dcafdab5e8225b43ffd23c94ac1ff932654.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_斜眼笑":"911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_疑问":"0793d949b18d7be716078349c202c15ff166f314.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_鼓掌":"1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png","tv_抠鼻":"c666f55e88d471e51bbd9fab9bb308110824a6eb.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_调皮":"b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png","tv_笑哭":"1abc628f6d4f4caf9d0e7800878f4697abbc8273.png","tv_晕":"5443c22b4d07fb1907ccc610c8e6db254f2461b7.png","tv_点赞":"f85c354995bd99e28fc76c869bfe42ba6438eff4.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_睡着":"8b196675b53af58264f383c50ad0945048290b33.png","tv_色":"61822c7e9aae5da76475e7892534545336b23a6f.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_无奈":"ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_流汗":"cead1c351ab8d79e9f369605beb90148db0fbed3.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_抓狂":"fe31c08edad661d63762b04e17b8d5ae3c71a757.png","tv_黑人问号":"45821a01f51bc867da9edbaa2e070410819a95b2.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_打脸":"56ab10b624063e966bfcb76ea5dc4794d87dfd47.png","tv_闭嘴":"c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png","tv_鄙视":"6e72339f346a692a495b123174b49e4e8e781303.png","tv_腼腆":"89712c0d4af73e67f89e35cbc518420380a7f6f4.png","tv_馋":"fc7e829b845c43c623c8b490ee3602b7f0e76a31.png","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_生病":"8b0ec90e6b86771092a498c54f09fc94621c1900.png","tv_流鼻血":"c32d39db2737f89b904ca32700d140a9241b0767.png","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_流泪":"7e71cde7858f0cd50d74b0264aa26db612a8a167.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_皱眉":"72ccad6679fea0d14cce648b4d818e09b8ffea2d.png","tv_鬼脸":"0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png","tv_调侃":"4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png","tv_目瞪口呆":"0b8cb81a68de5d5365212c99375e7ace3e7891b7.png","2233娘_大笑":"16b8794be990cefa6caeba4d901b934a227ee3b8.png","2233娘_疑问":"0b41f509351958dbb63d472fec0132d1bd03bd14.png","2233娘_吃惊":"d1628c43d35b1530c0504a643ff80b6189fa0a43.png","2233娘_汗":"247cd9df8cdf84b18368c21e3b2dd374e84c0927.png","2233娘_大哭":"476a2a60f6e337b8c0697a592e0aa82781f6b33b.png","2233娘_困惑":"714eeb4eae0d0933b4ff08b7df788b1982f6b940.png","2233娘_耶":"d7178e258a0efc969b65ccc2b1322fb235f5dff4.png","2233娘_怒":"f31953119c51b9748016440ac0b632f779929b37.png","2233娘_卖萌":"ea893aa25355de95ab4f03c2dad3f0c58d0c159e.png","2233娘_委屈":"d9d0bf9d358af8d5761093ec66d4e3f60d963a63.png","2233娘_郁闷":"485203fe7100f2c8fc40b2800a18fe20b35f2f1a.png","2233娘_第一":"3754ee6e5985bd0bd7dfb668981f2a8733398ebd.png","2233娘_喝水":"695bf5429472049b52c1e0de586f8a2511195a23.png","2233娘_吐魂":"e999af499edf38a91ca68b1a9d2f97042c1d6734.png","2233娘_无言":"fdb5870f32cfaf7949e0f88a13f6feba4a48b719.png","热词系列_增加":"142409b595982b8210b2958f3d340f3b47942645.png","热词系列_泪目":"bba3703ab90b7d16fe9dbcb85ed949db687f8331.png","热词系列_保护":"55f8f6445ca7c3170cdfc5b16036abf639ce9b57.png","热词系列_害怕":"d77e2de26da143249f0c0ad7a608c27152c985bf.png","热词系列_爱了爱了":"2a165b555ba20391316366c664ed7891883dc5aa.png","热词系列_问号":"c1d1e76c12180adc8558f47006fe0e7ded4154bb.png","热词系列_吹爆":"b528220f9c37256ed6a37f05bf118e44b08b81e5.png","热词系列_三连":"21f15fe11b7a84d2f2121c16dec50a4e4556f865.png","热词系列_可以":"e08543c71202b36c590094417fcfbb80c3506cd8.png","热词系列_打卡":"a9cf77c78e1b9b40aa3ed4862402fba008ee2f51.png","热词系列_妙啊":"0e98299d7decf5eaffad854977946075c3e91cb8.png","热词系列_这次一定":"a01ca28923daa7cc896c42f27deb4914e20dd572.png","热词系列_AWSL":"c37f88cf799f9badf9d84b7671dc3dd98c0fc0c2.png","热词系列_递话筒":"98e6950e39fbb4dd1c576042063ca632074070ba.png","热词系列_你细品":"535e00658e7e47966f154d3a167fa2365ebc4321.png","热词系列_咕咕":"d8065c2e7ce48c929317a94553499a46fecc262a.png","热词系列_标准结局":"3de98174b510cf7dc5fd1bd08c5d881065e79137.png","热词系列_危":"5cc6c3357c4df544dd8de9d5c5c0cec97c7c9a56.png","热词系列_张三":"255a938f39cea625032b6650036b31aa26c50a3c.png","热词系列_害":"cbe798a194612958537c5282fcca7c3bcd2aa15c.png","热词系列_我裂开了":"29bd57ec4e8952880fea6c9e47aee924e91f10c4.png","热词系列_有内味了":"7ca61680a905b5b6e2e335c630e725b648b03b4d.png","热词系列_猛男必看":"c97064450528a0e45c7e7c365a15fbb13fd61d8c.png","热词系列_奥力给":"c9b8683827ec6c00fea5327c9bec14f581cef2aa.png","热词系列_我哭了":"9e0b3877d649aaf6538fbdd3f937e240a9d808e4.png","热词系列_高产":"9db817cba4a7f4a42398f3b2ec7c0a8e0c247c42.png","热词系列_我酸了":"a8cbf3f6b8cd9377eeb15b9172f3cd683b2e4650.png","热词系列_真香":"e68497c775feaac1c3b1a6cd63a50cfb11b767c4.png","热词系列_我全都要":"d424d1ad8d14c1c9b8367842bc68c658b9229bc1.png","热词系列_神仙UP":"a49e0d0db1e7d35a0f7411be13208951ab448f03.png","热词系列_你币有了":"84820c2b147a8ca02f3c4006b63f76c6313cbfa0.png","热词系列_不愧是你":"9ff2e356797c57ee3b1675ade0883d2d2247be9b.png","热词系列_锤":"35668cc12ae25b9545420e4a85bf21a0bfc03e5d.png","热词系列_秀":"50782fbf5d9b7f48f9467b5c53932981e321eedc.png","热词系列_爷关更":"faad40c56447f1f8abcb4045c17ce159d113d1fd.png","热词系列_有生之年":"f41fdafe2d0fbb8e8bc1598d2cf37e355560103a.png","热词系列_镇站之宝":"24e7a6a6e6383c987215fb905e3ee070aca259b5.png","热词系列_我太男了":"a523f3e4c63e4db1232365765d0ec452f83be97e.png","热词系列_完结撒花":"ea9db62ff5bca8e069cd70c4233353a802835422.png","热词系列_大师球":"f30089248dd137c568edabcb07cf67e0f6e98cf3.png","热词系列_知识盲区":"ccc94600b321a28116081e49ecedaa4ee8728312.png","热词系列_“狼火”":"33ccd3617bfa89e9d1498b13b7542b63f163e5de.png","加油武汉":"eb966aaa5b690d3f9308a9f936f5b5a72a7f956b.png","口罩":"3ad2f66b151496d2a5fb0a8ea75f32265d778dd3.png","鸡腿":"c7860392815d345fa69c4f00ef18d67dccfbd574.png","微笑":"685612eadc33f6bc233776c6241813385844f182.png","笑":"81edf17314cea3b48674312b4364df44d5c01f17.png","呲牙":"b5a5898491944a4268360f2e7a84623149672eb6.png","OK":"4683fd9ffc925fa6423110979d7dcac5eda297f4.png","星星眼":"63c9d1a31c0da745b61cdb35e0ecb28635675db2.png","哦呼":"362bded07ea5434886271d23fa25f5d85d8af06c.png","嫌弃":"de4c0783aaa60ec03de0a2b90858927bfad7154b.png","喜欢":"8a10a4d73a89f665feff3d46ca56e83dc68f9eb8.png","酸了":"92b1c8cbceea3ae0e8e32253ea414783e8ba7806.png","大哭":"2caafee2e5db4db72104650d87810cc2c123fc86.png","害羞":"9d2ec4e1fbd6cb1b4d12d2bbbdd124ccb83ddfda.png","无语":"44667b7d9349957e903b1b62cb91fb9b13720f04.png","疑惑":"b7840db4b1f9f4726b7cb23c0972720c1698d661.png","调皮":"8290b7308325e3179d2154327c85640af1528617.png","喜极而泣":"485a7e0c01c2d70707daae53bee4a9e2e31ef1ed.png","奸笑":"bb84906573472f0a84cebad1e9000eb6164a6f5a.png","偷笑":"6c49d226e76c42cd8002abc47b3112bc5a92f66a.png","大笑":"ca94ad1c7e6dac895eb5b33b7836b634c614d1c0.png","阴险":"ba8d5f8e7d136d59aab52c40fd3b8a43419eb03c.png","捂脸":"6921bb43f0c634870b92f4a8ad41dada94a5296d.png","囧":"12e41d357a9807cc80ef1e1ed258127fcc791424.png","呆":"33ad6000d9f9f168a0976bc60937786f239e5d8c.png","抠鼻":"cb89184c97e3f6d50acfd7961c313ce50360d70f.png","惊喜":"0afecaf3a3499479af946f29749e1a6c285b6f65.png","惊讶":"f8e9a59cad52ae1a19622805696a35f0a0d853f3.png","笑哭":"c3043ba94babf824dea03ce500d0e73763bf4f40.png","妙啊":"b4cb77159d58614a9b787b91b1cd22a81f383535.png","doge":"bba7c12aa51fed0199c241465560dfc2714c593e.png","滑稽":"d15121545a99ac46774f1f4465b895fe2d1411c3.png","吃瓜":"4191ce3c44c2b3df8fd97c33f85d3ab15f4f3c84.png","打call":"431432c43da3ee5aab5b0e4f8931953e649e9975.png","点赞":"1a67265993913f4c35d15a6028a30724e83e7d35.png","鼓掌":"895d1fc616b4b6c830cf96012880818c0e1de00d.png","尴尬":"cb321684ed5ce6eacdc2699092ab8fe7679e4fda.png","冷":"cb0ebbd0668640f07ebfc0e03f7a18a8cd00b4ed.png","灵魂出窍":"43d3db7d97343c01b47e22cfabeca84b4251f35a.png","委屈":"d2f26cbdd6c96960320af03f5514c5b524990840.png","傲娇":"010540d0f61220a0db4922e4a679a1d8eca94f4e.png","疼":"905fd9a99ec316e353b9bd4ecd49a5f0a301eabf.png","吓":"9c10c5ebc7bef27ec641b8a1877674e0c65fea5d.png","生病":"0f25ce04ae1d7baf98650986454c634f6612cb76.png","吐":"06946bfe71ac48a6078a0b662181bb5cad09decc.png","嘘声":"e64af664d20716e090f10411496998095f62f844.png","捂眼":"c5c6d6982e1e53e478daae554b239f2b227b172b.png","思考":"cfa9b7e89e4bfe04bbcd34ccb1b0df37f4fa905c.png","再见":"fc510306bae26c9aec7e287cdf201ded27b065b9.png","翻白眼":"eba54707c7168925b18f6f8b1f48d532fe08c2b1.png","哈欠":"888d877729cbec444ddbd1cf4c9af155a7a06086.png","奋斗":"bb2060c15dba7d3fd731c35079d1617f1afe3376.png","墨镜":"3a03aebfc06339d86a68c2d893303b46f4b85771.png","撇嘴":"531863568e5668c5ac181d395508a0eeb1f0cda4.png","难过":"a651db36701610aa70a781fa98c07c9789b11543.png","抓狂":"4c87afff88c22439c45b79e9d2035d21d5622eba.png","生气":"3195714219c4b582a4fb02033dd1519913d0246d.png","干杯":"8da12d5f55a2c7e9778dcc05b40571979fe208e6.png","爱心":"ed04066ea7124106d17ffcaf75600700e5442f5c.png","锦鲤":"643d6c19c8164ffd89e3e9cdf093cf5d773d979c.png","胜利":"b49fa9f4b1e7c3477918153b82c60b114d87347c.png","加油":"c7aaeacb21e107292d3bb053e5abde4a4459ed30.png","保佑":"fafe8d3de0dc139ebe995491d2dac458a865fb30.png","抱拳":"89516218158dbea18ab78e8873060bf95d33bbbe.png","响指":"1b5c53cf14336903e1d2ae3527ca380a1256a077.png","支持":"3c210366a5585706c09d4c686a9d942b39feeb50.png","拥抱":"41780a4254750cdaaccb20735730a36044e98ef3.png","怪我咯":"07cc6077f7f7d75b8d2c722dd9d9828a9fb9e46d.png","跪了":"f2b3aee7e521de7799d4e3aa379b01be032698ac.png","黑洞":"e90ec4c799010f25391179118ccd9f66b3b279ba.png","老鼠":"8e6fb491eb1bb0d5862e7ec8ccf9a3da12b6c155.png","福到了":"5de5373d354c373cf1617b6b836f3a8d53c5a655.png"},
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/js/calendar.js"></script><script src="/js/languages.js"></script><script src="/js/other.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script></div></body></html>